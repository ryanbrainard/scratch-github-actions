// wrapper to run action locally with static context

const {Octokit} = require("@octokit/rest");
const script = require("./report-annotations");

const github = new Octokit({auth: process.env.GITHUB_TOKEN});

const context = {
  payload: {
    action: 'synchronize',
    after: 'bbc5d791f59b43c935f278369bca8921e38a2c53',
    before: '55460091eaa78d9093701d273a4d29cd56e1ba8b',
    number: 1,
    pull_request: {
      _links: [Object],
      active_lock_reason: null,
      additions: 4,
      assignee: null,
      assignees: [],
      author_association: 'OWNER',
      auto_merge: null,
      base: [Object],
      body: '',
      changed_files: 2,
      closed_at: null,
      comments: 0,
      comments_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/issues/1/comments',
      commits: 4,
      commits_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/pulls/1/commits',
      created_at: '2021-03-23T03:40:42Z',
      deletions: 2,
      diff_url: 'https://github.com/ryanbrainard/scratch-github-actions/pull/1.diff',
      draft: false,
      head: [Object],
      html_url: 'https://github.com/ryanbrainard/scratch-github-actions/pull/1',
      id: 598518543,
      issue_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/issues/1',
      labels: [],
      locked: false,
      maintainer_can_modify: false,
      merge_commit_sha: '94cf4dae298b153183ff484af66d6bb30038065b',
      mergeable: null,
      mergeable_state: 'unknown',
      merged: false,
      merged_at: null,
      merged_by: null,
      milestone: null,
      node_id: 'MDExOlB1bGxSZXF1ZXN0NTk4NTE4NTQz',
      number: 1,
      patch_url: 'https://github.com/ryanbrainard/scratch-github-actions/pull/1.patch',
      rebaseable: null,
      requested_reviewers: [],
      requested_teams: [],
      review_comment_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/pulls/comments{/number}',
      review_comments: 0,
      review_comments_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/pulls/1/comments',
      state: 'open',
      statuses_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/statuses/bbc5d791f59b43c935f278369bca8921e38a2c53',
      title: 'PR A',
      updated_at: '2021-03-23T03:53:46Z',
      url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/pulls/1',
      user: [Object]
    },
    repository: {
      archive_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/{archive_format}{/ref}',
      archived: false,
      assignees_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/assignees{/user}',
      blobs_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/git/blobs{/sha}',
      branches_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/branches{/branch}',
      clone_url: 'https://github.com/ryanbrainard/scratch-github-actions.git',
      collaborators_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/collaborators{/collaborator}',
      comments_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/comments{/number}',
      commits_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/commits{/sha}',
      compare_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/compare/{base}...{head}',
      contents_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/contents/{+path}',
      contributors_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/contributors',
      created_at: '2021-03-23T01:22:19Z',
      default_branch: 'master',
      deployments_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/deployments',
      description: null,
      disabled: false,
      downloads_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/downloads',
      events_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/events',
      fork: false,
      forks: 0,
      forks_count: 0,
      forks_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/forks',
      full_name: 'ryanbrainard/scratch-github-actions',
      git_commits_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/git/commits{/sha}',
      git_refs_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/git/refs{/sha}',
      git_tags_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/git/tags{/sha}',
      git_url: 'git://github.com/ryanbrainard/scratch-github-actions.git',
      has_downloads: true,
      has_issues: true,
      has_pages: false,
      has_projects: true,
      has_wiki: true,
      homepage: null,
      hooks_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/hooks',
      html_url: 'https://github.com/ryanbrainard/scratch-github-actions',
      id: 350540978,
      issue_comment_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/issues/comments{/number}',
      issue_events_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/issues/events{/number}',
      issues_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/issues{/number}',
      keys_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/keys{/key_id}',
      labels_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/labels{/name}',
      language: 'JavaScript',
      languages_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/languages',
      license: null,
      merges_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/merges',
      milestones_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/milestones{/number}',
      mirror_url: null,
      name: 'scratch-github-actions',
      node_id: 'MDEwOlJlcG9zaXRvcnkzNTA1NDA5Nzg=',
      notifications_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/notifications{?since,all,participating}',
      open_issues: 0,
      open_issues_count: 0,
      owner: {
        login: 'ryanbrainard',
      },
      private: true,
      pulls_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/pulls{/number}',
      pushed_at: '2021-03-23T03:53:45Z',
      releases_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/releases{/id}',
      size: 554,
      ssh_url: 'git@github.com:ryanbrainard/scratch-github-actions.git',
      stargazers_count: 0,
      stargazers_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/stargazers',
      statuses_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/statuses/{sha}',
      subscribers_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/subscribers',
      subscription_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/subscription',
      svn_url: 'https://github.com/ryanbrainard/scratch-github-actions',
      tags_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/tags',
      teams_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/teams',
      trees_url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions/git/trees{/sha}',
      updated_at: '2021-03-23T03:33:13Z',
      url: 'https://api.github.com/repos/ryanbrainard/scratch-github-actions',
      watchers: 0,
      watchers_count: 0
    },
    sender: {
      avatar_url: 'https://avatars.githubusercontent.com/u/966764?v=4',
      events_url: 'https://api.github.com/users/ryanbrainard/events{/privacy}',
      followers_url: 'https://api.github.com/users/ryanbrainard/followers',
      following_url: 'https://api.github.com/users/ryanbrainard/following{/other_user}',
      gists_url: 'https://api.github.com/users/ryanbrainard/gists{/gist_id}',
      gravatar_id: '',
      html_url: 'https://github.com/ryanbrainard',
      id: 966764,
      login: 'ryanbrainard',
      node_id: 'MDQ6VXNlcjk2Njc2NA==',
      organizations_url: 'https://api.github.com/users/ryanbrainard/orgs',
      received_events_url: 'https://api.github.com/users/ryanbrainard/received_events',
      repos_url: 'https://api.github.com/users/ryanbrainard/repos',
      site_admin: false,
      starred_url: 'https://api.github.com/users/ryanbrainard/starred{/owner}{/repo}',
      subscriptions_url: 'https://api.github.com/users/ryanbrainard/subscriptions',
      type: 'User',
      url: 'https://api.github.com/users/ryanbrainard'
    }
  },
  eventName: 'pull_request',
  sha: '4bf9d8845f9be4e246901a3e2c41b1767dc055f5',
  ref: 'refs/pull/1/merge',
  workflow: 'ci',
  action: 'actionsgithub-script',
  actor: 'ryanbrainard',
  job: 'report-annotations',
  runNumber: 16,
  runId: 678328146
}

// simulate accessor
context.repo = {
  owner: context.payload.repository.owner.login,
  repo: context.payload.repository.name
}

script({github, context})
